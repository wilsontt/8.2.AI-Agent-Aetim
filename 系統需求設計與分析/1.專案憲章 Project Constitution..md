# 專案憲章 Project Constitution：AI 驅動之自動化威脅情資管理系統 
**版本 Version**：v2.1.0  
**核准日期 Ratified**：2025-11-09  
**最近修訂 Last Amended**：2025-11-09

#### 本文件闡述了`「AI 驅動之自動化威脅情資管理系統」`專案的**不可協商原則**。所有規格文件、計畫與程式碼皆**必須嚴格遵循**下列規範。
#### This document outlines the non-negotiable principles for the `「AI 驅動之自動化威脅情資管理系統」` project. All specifications, plans, and code **MUST adhere** to these rules.
---
> 你是設計開發及各種AI 應用的專家，也是專業的諮詢顧問，並協助企業導入各系統，及解決各種問題。

> > 我是一家公司的資安官，在公司裡負責與ISO27001:2022 相關的工作，並且也要回覆客戶詢問相關的問題，
> 而你是一位頂尖的資安威脅分析師，也是一位企業資安諮詢的顧問，同時你也是AI應用的專家，
> 你的任務就是協助我完成每一次的需求與任務。
> 我現在需要一個能夠自動化定期收集資安情資整合與威脅分析，然後產生有用的分析報告。
> 1. 蒐集威脅情資：
> 2. 威脅分析，比對與內部資產的實際影響：
> 3. 產生分析報告：
> 4. 通知資安官或相關IT人員。
> 這是目前的想法，不知道你還有沒有什麼建議與想法。
--- 
## 第一章：核心原則 (Core Principles)

### 開發規範

### P0：所有專案遵循「規格驅動開發 (SDD)」流程：

1. Phase 1: 規格 (SPEC)
2. Phase 2: 計畫 (PLAN)
3. Phase 3: 任務 (Tasks)
4. Phase 4: 執行 (EXECUTE)
5. Phase 5: 驗收 (REVIEW)

### P1：簡潔優先於複雜 (Simplicity over Complexity)

**規範**：我們必須偏好**清晰、簡單、直接**的解決方案，而非複雜或「巧妙」的做法。若複雜性不可避免，必須在設計與實作計畫中提供充分的**理由與文件化說明**。
**原由**：簡單的系統更容易開發、測試、維護、安全與除錯。

### P2：設計即安全 (Security by Design)

**規範**：安全性是**基本且不可協商**的設計要求。所有設計**必須從一開始就考量安全性**。
1.  **身份驗證 (Authentication)**：**必須**使用統一的身份驗證提供者 (IdP)，採用 `[OIDC / OAuth 2.0]` 協議。
2.  **授權 (Authorization)**：**必須**採用集中式的「角色基礎存取控制 (RBAC)」。
3.  **合規性 (Compliance)**：所有涉及文件存取、修改、刪除的操作，**必須**產生不可否認的稽核日誌 (Audit Log)，以符合 `[ISO 27001:2022]` 的要求。
4.  **數據加密 (Encryption)**：敏感文件**必須**在儲存時 (at-rest) 和傳輸時 (in-transit) 全程加密。

**原由**：確保資料的**完整性、機密性與可用性**是我們的首要責任。

### P3：清晰與可測試性 (Clarity and Testability)

**規範**：所有工作必須**可驗證且可測試**。  
1. 規格文件（`spec.md`）中，每個使用者故事（user story）必須具有明確、可測試的驗收條件。  
2. 程式碼必須撰寫為**可進行單元測試與整合測試**。

**原由**：無法測試的程式即無法驗證，且很快會成為技術負債。

### P4：漸進式價值交付 (Incremental Value Delivery)

**規範**：必須以**小型、可驗證且獨立的增量**交付價值，並直接對應使用者故事。所有任務（`tasks.md`）都必須可追溯至規格文件（`spec.md`）中的特定使用者故事。
**原由**：確保每項工作可測試、可部署、具明確價值。

### P5：主要語言（zh-TW） (Primary Language)

**規範**：所有專案產出物（包括 `spec.md`、`plan.md`、`tasks.md`、使用者文件、程式註解）必須使用**正體中文（zh-TW）**撰寫。
**原由**：確保專案文件對所有團隊成員與利害關係人具備一致性與可理解性。

---

## 第二章：設計與品質原則 (Design & Quality Principles)

### P6：程式碼品質標準 (Code Quality Standards)

**規範**：程式碼必須遵循既定的風格與最佳實踐（如 lint 規則、格式化、變數命名一致性），且所有程式碼在合併前**必須經由程式碼審查（code review）**。
**原由**：確保長期可讀性、降低錯誤率並簡化新進開發者的上手過程。

### P7：嚴謹測試標準 (Rigorous Testing Standards)

**規範**：所有新功能必須具備相應的測試（單元測試、整合測試或端對端測試），測試的範圍與類型必須記載於 `plan.md` 文件中。
**原由**：確保功能符合預期、防止回歸錯誤、並支援安全的重構。

### P8：一致的使用者體驗 (User Experience Consistency)

**規範**：所有使用者介面與互動行為必須維持**一致的設計語言與操作模式**。
1.  **必須**使用一套統一的設計系統（Design System）和共用組件庫。
2.  若有新增的 UI/UX 模式，必須在 `spec.md` 中提供充分的**理由與文件化說明**。
3.  **(新增條款)** **明確的交易儲存 (Explicit Save)**：所有資料異動（新增、修改、刪除、停用）**不得**採用即時儲存 (Auto-Save)。**必須**提供「儲存」或「確認」按鈕，並搭配「取消」按鈕，由使用者明確觸發，以批次 (Batch) 方式提交變更。

**原由**：提供專業、一致且易於使用的介面，降低使用者混淆與技術支援負擔。確保資料交易的完整性，防止使用者誤操作。

### P9：效能要求 (Performance Requirements)

**規範**：所有與效能相關的非功能性需求（例如回應時間、資源使用量）必須在 `spec.md` 中明確定義，特別是針對效能關鍵功能。
**原由**：確保系統在負載下仍維持**高回應性、可擴充性與穩定性**。

---

## 第三章：架構與技術原則 (Architecture & Technology Principles)

### P10：架構設計 (Architectural Design)

**規範**：
1.  **領域驅動設計 (DDD)**：嚴格遵循 DDD 方法論。所有「子專案」必須基於「有界上下文 (Bounded Context)」進行劃分。
2.  **架構模式 (Pattern)**：採用「模組化單體 (Modular Monolith)」架構，確保模組間界線清晰。未來僅在必要時，經批准後方可將特定模組拆分為微服務。
3.  **非同步通訊 (Async Communication)**：對於非即時性的跨模組操作，**必須** 使用事件/訊息佇列進行非同步處理。

**原由**：建立一個高內聚、低耦合、可演進的系統架構，避免未來陷入新的「巨石泥沼」。

### P11：技術堆疊 (Technology Stack)

**規範**：所有專案及子專案**必須**在以下指定的技術堆疊內開發，任何例外**必須**依照「第 H1 條：修訂程序」提出。
1.  **前端 UI/UX**：`[例如：原生支援 Tailwind CSS  ＋ Next.js 14+ / React 18+ ＋ Typescript ＋ 響應式設計]`
2.  **後端 (API)**：`[例如：ASP.NET Core 8+ WebAPI / C# 12 / Python]`
3.  **資料庫**：`[例如：SQLite / MS SQL Server 2022+]`
4.  **API 規格**：`[例如：RESTful (OpenAPI 3.x)]`
5.  **緩存 (Caching)**：`[例如：Redis]`
6.  **容器化**：`[Docker]`

**原由**：統一技術堆疊可降低維護、安全和人員培訓的複雜性與成本。

### P12：數據治理 (Data Governance)

**規範**：
1.  **單一事實來源 (SSoT)**：每個數據實體**必須**有唯一的「擁有者」模組，**禁止**跨模組直接存取資料庫。
2.  **資料庫變更 (Schema Change)**：**禁止**手動變更生產資料庫。所有 Schema 變更**必須**透過資料庫遷移工具（例如 `Entity Framework Core Migrations`）以程式碼形式管理。

**原由**：確保資料一致性，並使資料庫結構的演進可追蹤、可審核、可重複。

### P13：可觀測性 (Observability)

**規範**：所有模組**必須**提供可觀測性支持。
1.  **日誌 (Logging)**：**必須**使用結構化日誌 (Structured Logging)，並將日誌統一發送到中央日誌系統。
2.  **指標 (Metrics)**：**必須**暴露標準化的健康檢查 (Health Check) 端點和關鍵效能指標。
3.  **追蹤 (Tracing)**：跨模組的 API 呼叫**必須**實作分佈式追蹤 (Distributed Tracing)。

**原由**：確保系統在發生問題時，具備快速定位和診斷問題的能力。

---

## 第四章：治理 (Governance)

### H1：修訂程序 (Amendment Process)

**規範**：任何對本憲章的修改必須透過 **Pull Request** 提出，並經**專案負責人核准**。每次修訂均需更新版本號。

### H2：版本管理 (Versioning)

- **主版號（MAJOR，例如 v2.0.0）**：刪除原則、新增「章節」（例如 `第三章`），或進行不相容的治理變更。
- **次版號（MINOR，例如 v2.1.0）**：新增新原則（例如 `P14`） 或對現有原則增加具約束力的內容。
- **修補版（PATCH，例如 v2.0.1）**：修正文法、用詞或非語義性微調。

### H3：合規要求 (Compliance)

**規範**：所有功能計畫文件（`plan.md`）必須包含一個「**憲章遵循檢查（Constitution Check）**」章節，以明確驗證該計畫是否遵守本憲章所有現行的原則。

